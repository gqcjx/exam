# 移动端界面集成说明

## 功能概述

已实现自动检测学生用户登录设备，当检测到手机或平板设备时，自动切换到基于 `prototype` 目录的高保真原型界面。

## 实现内容

### 1. 设备检测工具 (`src/utils/deviceDetection.ts`)

- `isMobileDevice()`: 检测是否为移动设备（手机或平板）
- `isTabletDevice()`: 检测是否为平板设备
- `isPhoneDevice()`: 检测是否为手机设备
- `getDeviceType()`: 获取设备类型

检测逻辑：
- User Agent 检测
- 屏幕宽度检测（< 768px）
- 触摸支持检测

### 2. 设备感知路由组件 (`src/components/DeviceAwareRoute.tsx`)

根据设备类型和用户角色自动选择移动端或桌面端组件：
- 移动设备 + 学生用户 → 使用移动端组件
- 其他情况 → 使用桌面端组件

### 3. 移动端页面组件

#### 登录页面 (`src/pages/mobile/LoginMobile.tsx`)
- 基于 `prototype/login.html` 设计
- 清新现代的蓝绿色主题
- 完整的登录功能（邮箱/手机号/姓名登录）
- 记住我功能
- 忘记密码链接

#### 仪表盘页面 (`src/pages/mobile/DashboardMobile.tsx`)
- 基于 `prototype/dashboard.html` 设计
- 顶部欢迎栏（用户信息、统计卡片）
- 快速入口（错题本、排行榜、成绩报表、设置）
- 待考试卷列表
- 已完成试卷列表
- 底部导航栏

### 4. 路由配置 (`src/routes.tsx`)

已更新路由配置：
- `/login`: 根据设备类型自动选择移动端或桌面端登录页面
- `/dashboard`: 学生用户在移动设备上使用移动端仪表盘

### 5. 布局优化 (`src/layouts/AppLayout.tsx`)

- 移动端学生用户在特定页面（dashboard、exam、result）时隐藏顶部导航栏
- 移动端页面使用全屏布局（无 padding）

### 6. HTML 配置 (`index.html`)

已添加：
- Font Awesome 图标库（移动端 UI 需要）
- Google Fonts（Montserrat 和 Roboto）

## 使用说明

### 自动检测流程

1. **登录页面**：
   - 移动设备访问 → 显示移动端登录界面
   - 桌面设备访问 → 显示桌面端登录界面

2. **学生用户登录后**：
   - 移动设备 → 自动使用移动端界面（登录页、仪表盘）
   - 桌面设备 → 使用原有桌面端界面

3. **其他角色用户**：
   - 无论设备类型，都使用桌面端界面

### 移动端界面特点

- **设计风格**：清新现代，蓝绿色主题（#2E8B57）
- **布局**：375x812px 移动端优化布局
- **交互**：触摸友好，底部导航栏
- **功能**：与桌面端功能完全一致

## 技术实现

### 检测逻辑

```typescript
// 移动设备检测
const isMobile = isMobileDevice()
const isStudent = profile?.role === 'student'

// 条件判断
if (isMobile && isStudent) {
  // 使用移动端组件
} else {
  // 使用桌面端组件
}
```

### 路由配置示例

```typescript
{
  path: '/login',
  element: (
    <DeviceAwareRoute
      mobileComponent={<LoginMobile />}
      desktopComponent={<Login />}
      requireAuth={false}
    />
  )
}
```

## 文件结构

```
src/
├── utils/
│   └── deviceDetection.ts          # 设备检测工具
├── components/
│   ├── DeviceAwareRoute.tsx        # 设备感知路由组件
│   └── MobileLayout.tsx            # 移动端布局组件（备用）
├── pages/
│   └── mobile/
│       ├── LoginMobile.tsx         # 移动端登录页面
│       └── DashboardMobile.tsx     # 移动端仪表盘页面
├── layouts/
│   └── AppLayout.tsx               # 主布局（已优化移动端支持）
└── routes.tsx                      # 路由配置（已更新）

prototype/
├── login.html                      # 登录页面原型
├── dashboard.html                  # 仪表盘原型
├── exam.html                       # 考试界面原型
└── result.html                     # 成绩页面原型
```

## 注意事项

1. **默认进入登录界面**：项目设置默认进入 `/login` 路由
2. **仅学生用户**：移动端界面仅对学生用户生效
3. **其他角色**：教师、管理员、家长用户始终使用桌面端界面
4. **Exam 和 Result 页面**：目前仍使用桌面端组件，后续可根据需要添加移动端版本

## 测试建议

1. **移动设备测试**：
   - 使用手机浏览器访问登录页面
   - 使用学生账号登录
   - 检查是否显示移动端界面

2. **桌面设备测试**：
   - 使用桌面浏览器访问
   - 确认显示桌面端界面

3. **角色测试**：
   - 使用教师/管理员账号在移动设备登录
   - 确认仍显示桌面端界面

## 后续优化建议

1. 添加移动端 Exam 和 Result 页面组件
2. 优化移动端性能（代码分割）
3. 添加 PWA 支持（离线访问）
4. 优化移动端触摸交互体验
