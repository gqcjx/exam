# 待完善功能清单

## 📋 功能分类

### 🎯 P0 - 核心功能（高优先级）

#### 1. 错题本功能
- **状态**: ❌ 未实现
- **描述**: 独立的错题本页面，学生可以：
  - 查看所有错题
  - 按学科/年级/题型筛选
  - 标记已掌握/未掌握
  - 重新练习错题
  - 查看错题统计
- **当前状态**: 结果页面有错题列表，但无独立错题本功能
- **参考**: `quiz` 项目中有错题本实现

#### 2. 排行榜功能
- **状态**: ❌ 未实现
- **描述**: 
  - 按试卷/学科/年级显示排行榜
  - 显示排名、分数、用时等
  - 支持按时间范围筛选
- **参考**: `quiz` 项目中有排行榜实现

#### 3. 试卷导出功能
- **状态**: ❌ 未实现
- **描述**: 
  - 导出试卷为 PDF/Word 格式
  - 支持带答案/不带答案两种模式
  - 支持批量导出
- **当前状态**: 无导出功能

#### 4. 试卷时间限制完善
- **状态**: ⚠️ 部分实现
- **描述**: 
  - `start_time` 和 `end_time` 字段已添加
  - 需要完善 UI 设置界面
  - 需要完善前端时间校验逻辑
  - 需要在考试页面显示剩余时间
- **相关文件**: 
  - `exam/src/api/papers.ts` - 已支持时间字段
  - `exam/src/pages/AdminPapers.tsx` - 需要添加时间设置UI
  - `exam/src/pages/Exam.tsx` - 需要完善时间校验

### 🎯 P1 - 重要功能（中优先级）

#### 5. 填空题模糊匹配优化
- **状态**: ⚠️ 基础实现，需优化
- **描述**: 
  - 当前填空题可能有基础匹配逻辑
  - 需要支持同义词、相近词匹配
  - 需要支持多种答案格式（如"北京"和"北京市"）
- **相关文件**: `exam/src/api/papers.ts` - `submitAnswers` 函数

#### 6. 试卷版本管理
- **状态**: ❌ 未实现
- **描述**: 
  - 支持试卷重复发布（同一试卷可发布多次）
  - 版本号管理
  - 历史版本查看
- **README 提及**: "支持手动或随机组卷，并可重复发布版本"

#### 7. 题目标签管理
- **状态**: ⚠️ 部分实现
- **描述**: 
  - 当前题目有 `tags` 字段
  - 需要标签管理界面（创建、编辑、删除标签）
  - 需要按标签筛选题目
  - 需要标签统计功能
- **相关文件**: `exam/src/types.ts` - `QuestionItem` 有 `tags` 字段

#### 8. 学校与年级配置
- **状态**: ❌ 未实现
- **描述**: 
  - 管理员配置学校信息
  - 配置年级、班级信息
  - 批量导入学生账号
- **README 提及**: "配置学校与年级"

#### 9. 考试防作弊功能
- **状态**: ⚠️ 部分实现
- **描述**: 
  - 防切屏检测（代码中有 `focusLossCount`，但可能未完全实现）
  - 防复制粘贴
  - 考试时间限制
  - 提交后不可修改
- **相关文件**: `exam/src/pages/Exam.tsx` - 有 `focusLossCount` 状态

### 🎯 P2 - 增强功能（低优先级）

#### 10. 通知提醒功能
- **状态**: ❌ 未实现
- **描述**: 
  - 考试开始提醒
  - 考试截止提醒
  - 成绩发布通知
  - 简答题批阅完成通知
- **当前状态**: Dashboard 有简单的提醒显示，但无系统通知

#### 11. 成绩报表详细导出
- **状态**: ⚠️ 部分实现
- **描述**: 
  - 家长端已有 CSV 导出
  - 需要更详细的报表（按学科、按题型、按时间等）
  - 支持 PDF 格式导出
  - 支持图表展示
- **相关文件**: `exam/src/pages/Parent.tsx` - 有 CSV 导出

#### 12. 移动端适配优化
- **状态**: ⚠️ 部分实现
- **描述**: 
  - 当前使用 Tailwind CSS，有基础响应式
  - 需要 Capacitor 打包安卓应用
  - 需要优化移动端交互体验
  - 需要离线功能支持
- **README 提及**: "Capacitor 打包安卓"

#### 13. 数据备份功能
- **状态**: ❌ 未实现
- **描述**: 
  - 定期备份数据库
  - 导出备份文件
  - 恢复备份功能
- **README 提及**: "监控数据与备份"

#### 14. 角色权限细化管理
- **状态**: ⚠️ 基础实现
- **描述**: 
  - 当前有基础角色（admin/teacher/student/parent）
  - 需要更细化的权限控制（如：老师A只能管理自己创建的试卷）
  - 需要权限配置界面
- **相关文件**: `exam/src/components/ProtectedRoute.tsx`

#### 15. 试卷模板功能
- **状态**: ❌ 未实现
- **描述**: 
  - 保存常用试卷模板
  - 快速从模板创建试卷
  - 模板分享功能

#### 16. 题目难度自动评估
- **状态**: ⚠️ 部分实现
- **描述**: 
  - 当前有 `difficulty` 字段（1-5）
  - 需要根据答题正确率自动调整难度
  - 需要难度分布统计

#### 17. 学习路径推荐
- **状态**: ❌ 未实现
- **描述**: 
  - 根据错题推荐相关练习
  - 根据成绩推荐学习内容
  - 个性化学习建议

#### 18. 批量操作优化
- **状态**: ⚠️ 部分实现
- **描述**: 
  - 当前有批量删除题目功能
  - 需要批量编辑题目（如批量修改难度、标签等）
  - 需要批量导入学生
  - 需要批量发布试卷

## 📊 功能完成度统计

- **已实现**: 10+ 核心功能
- **部分实现**: 6 个功能（需要完善）
- **未实现**: 12+ 个功能

## 🔧 技术债务

1. **数据库 Schema**: `exam/supabase/schema.sql` 文件为空，需要完善
2. **RLS 策略**: 需要检查和完善 Row Level Security 策略
3. **错误处理**: 需要统一错误处理机制
4. **代码注释**: 部分复杂逻辑需要添加注释
5. **测试**: 缺少单元测试和集成测试

## 📝 建议优先级

根据用户规则要求（从架构层面考虑，简洁实用），建议优先实现：

1. **P0 功能** - 错题本、排行榜、试卷导出（核心用户体验）
2. **试卷时间限制完善** - 已有基础，只需完善UI和逻辑
3. **填空题模糊匹配优化** - 提升自动批改准确性
4. **题目标签管理** - 已有字段，只需完善UI

## 🎯 下一步行动

建议与用户确认：
1. 哪些功能是必须的（P0）
2. 哪些功能可以延后（P2）
3. 是否有其他特定需求

